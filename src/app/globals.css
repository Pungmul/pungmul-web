@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
  /* 폰트는 layout.tsx에서 localFont로 로드됨 */
  --swiper-theme-color: #ff5e3e !important;

  --color-primary: #ff5e3e;
  --color-primary-light: #ff8b8b;
  --color-primary-dark: #ff4c4c;

  --color-secondary: #fed421;

  --color-correct: #2172fe;
  --color-warning: #e14141;
  --color-green: #31dd65;

  --color-kakao: #fee500;
  /* 라이트 모드 색상을 기본 변수로 설정 */
  --color-grey-100: #f7f7f8;
  --color-grey-200: #edeef0;
  --color-grey-300: #dfe1e4;
  --color-grey-400: #c6c8cc;
  --color-grey-500: #a4a6aa;
  --color-grey-600: #73757a;
  --color-grey-700: #43454a;
  --color-grey-800: #232424;

  --color-purple-100: #f2eeff;
  --color-purple-200: #cdc5ff;
  --color-purple-300: #a79dff;
  --color-purple-400: #877fff;
  --color-purple-500: #6652e0;
  --color-purple-600: #4a38b3;
  --color-purple-700: #232424;

  --color-red-100: #ffecec;
  --color-red-200: #ffcece;
  --color-red-300: #ff8b8b;
  --color-red-400: #ff6b6b;
  --color-red-500: #ff4c4c;
  --color-red-600: #df4444;
  --color-red-700: #d13f3f;
  --color-red-800: #b12f2f;

  --color-lime-100: #efffc3;
  --color-lime-200: #e2fe98;
  --color-lime-300: #d5fd6a;
  --color-lime-400: #cafa40;
  --color-lime-500: #c8ff00;
  --color-lime-600: #bdeb00;
  --color-lime-700: #aed400;
  --color-lime-800: #a0bc00;

  /* 원본 라이트 모드 색상들 유지 */
  --color-grey-100-light: #f7f7f8;
  --color-grey-200-light: #edeef0;
  --color-grey-300-light: #dfe1e4;
  --color-grey-400-light: #c6c8cc;
  --color-grey-500-light: #a4a6aa;
  --color-grey-600-light: #73757a;
  --color-grey-700-light: #43454a;
  --color-grey-800-light: #232424;

  --color-purple-100-light: #f2eeff;
  --color-purple-200-light: #cdc5ff;
  --color-purple-300-light: #a79dff;
  --color-purple-400-light: #877fff;
  --color-purple-500-light: #6652e0;
  --color-purple-600-light: #4a38b3;
  --color-purple-700-light: #232424;

  --color-red-100-light: #ffecec;
  --color-red-200-light: #ffcece;
  --color-red-300-light: #ff8b8b;
  --color-red-400-light: #ff6b6b;
  --color-red-500-light: #ff4c4c;
  --color-red-600-light: #df4444;
  --color-red-700-light: #d13f3f;
  --color-red-800-light: #b12f2f;

  --color-lime-100-light: #efffc3;
  --color-lime-200-light: #e2fe98;
  --color-lime-300-light: #d5fd6a;
  --color-lime-400-light: #cafa40;
  --color-lime-500-light: #c8ff00;
  --color-lime-600-light: #bdeb00;
  --color-lime-700-light: #aed400;
  --color-lime-800-light: #a0bc00;

  --color-purple-100-dark: #2c2b3a;
  --color-purple-200-dark: #3b365b;
  --color-purple-300-dark: #5c50a7;
  --color-purple-400-dark: #6e5ed3;
  --color-purple-500-dark: #7866e9;
  --color-purple-600-dark: #9382ee;
  --color-purple-700-dark: #b3a7f2;
  --color-purple-800-dark: #d2caf6;

  --color-red-100-dark: #622e2e;
  --color-red-200-dark: #843636;
  --color-red-300-dark: #a04949;
  --color-red-400-dark: #b75c5c;
  --color-red-500-dark: #d34444;
  --color-red-600-dark: #d58585;
  --color-red-700-dark: #e89a9a;
  --color-red-800-dark: #f0baba;

  --color-grey-100-dark: #343536;
  --color-grey-200-dark: #404142;
  --color-grey-300-dark: #515253;
  --color-grey-400-dark: #6a6b6d;
  --color-grey-500-dark: #8a8b8d;
  --color-grey-600-dark: #b0b2b3;
  --color-grey-700-dark: #d2d3d4;
  --color-grey-800-dark: #f7f7f8;

  --color-lime-100-dark: #56622e;
  --color-lime-200-dark: #78833c;
  --color-lime-300-dark: #8d9644;
  --color-lime-400-dark: #a2aa4e;
  --color-lime-500-dark: #d0ea66;
  --color-lime-600-dark: #d6ee7a;
  --color-lime-700-dark: #ddf291;
  --color-lime-800-dark: #e6f6af;

  --text-h1: 24px;
  --text-h2: 20px;
  --text-h3: 18px;
  --text-h4: 16px;

  --text-m1: 14px;
  --text-m2: 12px;
  --text-m3: 10px;
  --text-m4: 8px;

  /* PWA stand-alone / safe-area 대응 (env 미지원 시 0으로 동작) */
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);

  /* 실제 사용 가능한 뷰포트 높이 (h-dvh 대신 사용해 overflow 방지) */
  --app-height: 100dvh;
}

/* 다크모드 자동 감지 및 색상 전환 */
@media (prefers-color-scheme: dark) {
  :root {
    --background: #232424;
    --foreground: #f7f7f8;

    /* 다크모드에서 색상 변수들을 다크 색상으로 전환 */
    --color-primary-light: var(--color-primary-dark);

    --color-grey-100: var(--color-grey-100-dark);
    --color-grey-200: var(--color-grey-200-dark);
    --color-grey-300: var(--color-grey-300-dark);
    --color-grey-400: var(--color-grey-400-dark);
    --color-grey-500: var(--color-grey-500-dark);
    --color-grey-600: var(--color-grey-600-dark);
    --color-grey-700: var(--color-grey-700-dark);
    --color-grey-800: var(--color-grey-800-dark);

    --color-purple-100: var(--color-purple-100-dark);
    --color-purple-200: var(--color-purple-200-dark);
    --color-purple-300: var(--color-purple-300-dark);
    --color-purple-400: var(--color-purple-400-dark);
    --color-purple-500: var(--color-purple-500-dark);
    --color-purple-600: var(--color-purple-600-dark);
    --color-purple-700: var(--color-purple-700-dark);
    --color-purple-800: var(--color-purple-800-dark);

    --color-red-100: var(--color-red-100-dark);
    --color-red-200: var(--color-red-200-dark);
    --color-red-300: var(--color-red-300-dark);
    --color-red-400: var(--color-red-400-dark);
    --color-red-500: var(--color-red-500-dark);
    --color-red-600: var(--color-red-600-dark);
    --color-red-700: var(--color-red-700-dark);
    --color-red-800: var(--color-red-800-dark);

    --color-lime-100: var(--color-lime-100-dark);
    --color-lime-200: var(--color-lime-200-dark);
    --color-lime-300: var(--color-lime-300-dark);
    --color-lime-400: var(--color-lime-400-dark);
    --color-lime-500: var(--color-lime-500-dark);
    --color-lime-600: var(--color-lime-600-dark);
    --color-lime-700: var(--color-lime-700-dark);
    --color-lime-800: var(--color-lime-800-dark);
  }
}

html {
  height: 100%;
  overflow: hidden;
  font-family: var(--font-nanum-neo);
  touch-action: pan-y;
  overscroll-behavior: none;
  background-color: var(--background);
  /* iOS 바운스 방지 추가 */
  position: fixed;
  width: 100%;
}

body {
  height: 100%;
  width: 100%;
  margin: 0;
  overflow-y: auto;
  color: var(--foreground);
  background-color: var(--background);
  font-family: var(--font-nanum);
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: none;
}

@media (display-mode: standalone) {
  :root {
    /* safe-area 제외한 실제 사용 가능 높이 */
    --app-height: calc(100dvh - var(--sat) - var(--sab));
  }

  html {
    min-height: 100dvh;
    min-height: -webkit-fill-available;
    /* safe-area도 html에 적용 */
    padding-top: var(--sat);
    padding-bottom: var(--sab);
    padding-left: var(--sal);
    padding-right: var(--sar);
  }

  body {
    /* body의 safe-area 패딩 제거 (html로 이동) */
    padding: 0;
    min-height: 100%;
    height: 100%;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

#nprogress .bar {
  @apply bg-primary h-[2px] !important;
}

.swiper-pagination-bullet-active {
  background-color: var(--color-primary);
}

input {
  color: var(--foreground);
  background-color: var(--background);
  border: 1px solid var(--color-grey-200);
}

.border-0\.5 {
  border-width: 0.5px;
}

/* styles.css */
.shadow-up-sm {
  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
}

.shadow-up-md {
  box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.15);
}

.shadow-up {
  box-shadow: 0 -6px 12px rgba(0, 0, 0, 0.2);
}

.shadow-up-lg {
  box-shadow: 0 -10px 20px rgba(0, 0, 0, 0.25);
}

.scroll-bar-hidden::-webkit-scrollbar {
  display: none;
}

.scroll-bar-hidden {
  -ms-overflow-style: none;
  /* IE and 엣지 */
  scrollbar-width: none;
  /* 파이어폭스 */
}

.slide-enter {
  opacity: 1;
  transform: translateX(100%);
}

.slide-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: opacity 1000ms ease, transform 1000ms ease;
}

/* Slide-out to right */
.slide-exit {
  opacity: 1;
  transform: translateX(0);
}

.slide-exit-active {
  opacity: 1;
  transform: translateX(100%);
  transition: opacity 1000ms ease, transform 1000ms ease;
}

@keyframes loading {
  0% {
    transform: translateX(-100%);
  }

  50% {
    transform: translateX(100%);
  }

  100% {
    transform: translateX(-100%);
  }
}

@keyframes rotateGradient {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

.ligtning-card-sign {
  overflow: hidden;
  background: radial-gradient(
    ellipse at center,
    rgba(154, 255, 65, 0.8) 0%,
    rgba(26, 255, 68, 0.2) 50%,
    rgba(179, 255, 28, 0.629) 60%
  );
  background-size: 100% 100%;
  width: calc(100% + 128px);
  height: calc(100% + 128px);
  position: absolute;
  top: -64px;
  left: -64px;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0.8;
  z-index: 1;
  pointer-events: none;
  transition: none;
  animation: rotateGradient 2s infinite linear;
}

.skeleton-item {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  --bg-default: var(--color-grey-300);
  --highlight: var(--color-grey-100);
  will-change: transform;
  background: linear-gradient(
    to right,
    var(--bg-default),
    var(--highlight),
    var(--bg-default)
  );
  animation: loading 3s infinite linear;
}

.skeleton-container {
  overflow: hidden;
  --bg-default: var(--color-grey-300);
  background-color: var(--bg-default);
  position: relative;
}

/* =================================
   디자인 시스템 유틸리티 클래스들
   ================================= */

/* 타이포그래피 클래스 */
.text-h1 {
  font-size: var(--text-h1);
  font-family: var(--font-nanum-neo);
  font-weight: 800;
  /* extra-bold */
}

.text-h2 {
  font-size: var(--text-h2);
  font-family: var(--font-nanum-neo);
  font-weight: 700;
  /* bold */
}

.text-h3 {
  font-size: var(--text-h3);
  font-family: var(--font-nanum-neo);
  font-weight: 700;
  /* bold */
}

.text-h4 {
  font-size: var(--text-h4);
  font-family: var(--font-nanum-neo);
  font-weight: 600;
  /* semi-bold */
}

/* 미디어 텍스트 클래스 (본문용) */
.text-m1 {
  font-size: var(--text-m1);
  font-family: var(--font-nanum-neo);
  font-weight: 400;
  /* regular */
}

.text-m2 {
  font-size: var(--text-m2);
  font-family: var(--font-nanum-neo);
  font-weight: 400;
  /* regular */
}

.text-m3 {
  font-size: var(--text-m3);
  font-family: var(--font-nanum-neo);
  font-weight: 400;
  /* regular */
}

.text-m4 {
  font-size: var(--text-m4);
  font-family: var(--font-nanum-neo);
  font-weight: 300;
  /* light */
}

/* 색상 조합 클래스 */
.text-primary {
  color: var(--color-primary);
}

.text-secondary {
  color: var(--color-secondary);
}

.text-muted {
  color: var(--color-grey-400);
}

.text-danger {
  color: var(--color-warning);
}

.text-success {
  color: var(--color-correct);
}

/* 그레이 색상 세부 클래스 */
.text-grey-100 {
  color: var(--color-grey-100);
}

.text-grey-200 {
  color: var(--color-grey-200);
}

.text-grey-300 {
  color: var(--color-grey-300);
}

.text-grey-400 {
  color: var(--color-grey-400);
}

.text-grey-500 {
  color: var(--color-grey-500);
}

.text-grey-600 {
  color: var(--color-grey-600);
}

.text-grey-700 {
  color: var(--color-grey-700);
}

.text-grey-800 {
  color: var(--color-grey-800);
}

.text-grey-900 {
  color: var(--color-grey-900);
}

/* 보라색 세부 클래스 */
.text-purple-100 {
  color: var(--color-purple-100);
}

.text-purple-200 {
  color: var(--color-purple-200);
}

.text-purple-300 {
  color: var(--color-purple-300);
}

.text-purple-400 {
  color: var(--color-purple-400);
}

.text-purple-500 {
  color: var(--color-purple-500);
}

.text-purple-600 {
  color: var(--color-purple-600);
}

.text-purple-700 {
  color: var(--color-purple-700);
}

.text-purple-800 {
  color: var(--color-purple-800);
}

.text-purple-900 {
  color: var(--color-purple-900);
}

/* 기본 색상 */
.text-white {
  color: white;
}

.text-black {
  color: black;
}

/* 배경색 조합 */
.bg-primary {
  background-color: var(--color-primary);
}

.bg-secondary {
  background-color: var(--color-secondary);
}

.bg-danger {
  background-color: var(--color-warning);
}

.bg-success {
  background-color: var(--color-correct);
}

/* 버튼 스타일 */
.btn-primary {
  background: linear-gradient(
    135deg,
    var(--color-primary),
    var(--color-primary-light)
  );
  color: white;
  padding: 14px 28px;
  border-radius: 12px;
  font-size: var(--text-m2);
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px rgba(129, 109, 255, 0.3);
  position: relative;
  overflow: hidden;
}

.btn-primary:hover {
  background: linear-gradient(
    135deg,
    var(--color-primary-light),
    var(--color-primary-dark)
  );
  box-shadow: 0 4px 16px rgba(129, 109, 255, 0.4);
  transform: translateY(-2px);
}

.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(129, 109, 255, 0.3);
}

.btn-secondary {
  background-color: var(--background);
  color: var(--color-primary);
  padding: 14px 28px;
  border-radius: 12px;
  font-size: var(--text-m2);
  font-weight: 600;
  border: 2px solid var(--color-primary-light);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
}

.btn-secondary:hover {
  background-color: var(--color-primary-light);
  border-color: var(--color-primary-dark);
  box-shadow: 0 4px 12px rgba(129, 109, 255, 0.2);
  transform: translateY(-1px);
}

.btn-secondary:active {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
}

/* 카드 스타일 */
.card {
  background-color: var(--background);
  border: 1px solid var(--color-grey-200);
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.card-header {
  border-bottom: 1px solid var(--color-grey-200);
  padding-bottom: 16px;
  margin-bottom: 16px;
}

/* 간격 유틸리티 */
.space-xs {
  gap: 4px;
}

.space-sm {
  gap: 8px;
}

.space-md {
  gap: 16px;
}

.space-lg {
  gap: 24px;
}

.space-xl {
  gap: 32px;
}

.p-xs {
  padding: 4px;
}

.p-sm {
  padding: 8px;
}

.p-md {
  padding: 16px;
}

.p-lg {
  padding: 24px;
}

.p-xl {
  padding: 32px;
}

.m-xs {
  margin: 4px;
}

.m-sm {
  margin: 8px;
}

.m-md {
  margin: 16px;
}

.m-lg {
  margin: 24px;
}

.m-xl {
  margin: 32px;
}

/* 컴포넌트별 스타일 */
.input-field {
  padding: 12px 16px;
  border: 2px solid var(--color-grey-200);
  border-radius: 12px;
  font-size: var(--text-m2);
  font-weight: 500;
  background-color: var(--background);
  color: var(--foreground);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.input-field:hover {
  border-color: var(--color-primary-light);
  box-shadow: 0 2px 6px rgba(129, 109, 255, 0.1);
}

.input-field:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 4px rgba(129, 109, 255, 0.1),
    0 4px 12px rgba(129, 109, 255, 0.15);
  transform: translateY(-1px);
}

.input-field::placeholder {
  color: var(--color-grey-400);
  font-weight: 400;
}

.badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 12px;
  border-radius: 16px;
  font-size: var(--text-h6);
  font-weight: 500;
}

.badge-primary {
  background-color: var(--color-purple-100);
  color: var(--color-purple-700);
}

.badge-secondary {
  background-color: var(--color-grey-100);
  color: var(--color-grey-700);
}

.badge-danger {
  background-color: var(--color-red-100);
  color: var(--color-red-700);
}

.badge-success {
  background-color: var(--color-lime-100);
  color: var(--color-lime-700);
}
